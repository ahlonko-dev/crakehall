{"version":3,"sources":["../../../src/server/algo/updateconnectiondate.js"],"names":["doc","require","date","updateConnectionAlgo","user","treesUser","userDate","dateConnect","now","Date","timeVerifcation","subtract","toHours","userMinutes","toMinutes","totalLeavesUser","console","log","totalLeaveDivision","leaveToGiveAll15Min","forEach","element","leave","totalUserLeaveToGive","module","exports"],"mappings":"AAAA,MAAM;AAACA,EAAAA;AAAD,IAAQC,OAAO,CAAC,UAAD,CAArB;;AACA,OAAOC,IAAP,MAAiB,eAAjB;;AAEA,eAAeC,oBAAf,CAAoCC,IAApC,EAA0CC,SAA1C,EAAqD;AACjD,QAAMC,QAAQ,GAAGF,IAAI,CAACG,WAAtB;AAEA,QAAMC,GAAG,GAAG,IAAIC,IAAJ,EAAZ;AACA,QAAMC,eAAe,GAAGR,IAAI,CAACS,QAAL,CAAcH,GAAd,EAAmBF,QAAnB,EAA6BM,OAA7B,EAAxB;AACA,QAAMC,WAAW,GAAGX,IAAI,CAACS,QAAL,CAAcH,GAAd,EAAmBF,QAAnB,EAA6BQ,SAA7B,EAApB;AACA,MAAIC,eAAe,GAAG,CAAtB;;AACA,MAAIL,eAAe,IAAI,CAAvB,EAA0B;AACtBM,IAAAA,OAAO,CAACC,GAAR,CACI,+DADJ;AAIA,UAAMC,kBAAkB,GAAG,IAAIR,eAA/B;AACA,UAAMS,mBAAmB,GAAGN,WAAW,GAAG,EAA1C;AAEAR,IAAAA,SAAS,CAACe,OAAV,CAAmBC,OAAD,IAAa;AAC3BN,MAAAA,eAAe,IAAIM,OAAO,CAACC,KAA3B;AACH,KAFD;AAGA,UAAMC,oBAAoB,GAAGR,eAAe,GAAGI,mBAA/C;AAEA,WAAO;AACHI,MAAAA,oBADG;AAEHL,MAAAA;AAFG,KAAP;AAIH,GAjBD,MAiBO;AACH,WAAO,KAAP;AACH;AACJ;;AAEDM,MAAM,CAACC,OAAP,GAAiBtB,oBAAjB","sourcesContent":["const {doc} = require(\"prettier\");\nimport date from \"date-and-time\";\n\nasync function updateConnectionAlgo(user, treesUser) {\n    const userDate = user.dateConnect;\n\n    const now = new Date();\n    const timeVerifcation = date.subtract(now, userDate).toHours();\n    const userMinutes = date.subtract(now, userDate).toMinutes();\n    let totalLeavesUser = 0;\n    if (timeVerifcation >= 1) {\n        console.log(\n            \"Il s'est écoullé assez de temps pour lancer l'update de timer\",\n        );\n\n        const totalLeaveDivision = 2 * timeVerifcation;\n        const leaveToGiveAll15Min = userMinutes / 15;\n\n        treesUser.forEach((element) => {\n            totalLeavesUser += element.leave;\n        });\n        const totalUserLeaveToGive = totalLeavesUser * leaveToGiveAll15Min;\n\n        return {\n            totalUserLeaveToGive,\n            totalLeaveDivision,\n        };\n    } else {\n        return false;\n    }\n}\n\nmodule.exports = updateConnectionAlgo;\n"],"file":"updateconnectiondate.js"}